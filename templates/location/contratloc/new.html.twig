
{% block page_content %}
{% form_theme form 'widget/fields-block.html.twig' %}
<div class="modal-header">
    <h5 class="modal-title" id="exampleModalLabel">Création Contrat locataire</h5>
    <div class="btn btn-icon btn-sm  ms-2" data-bs-dismiss="modal" aria-label="Close">
        <span class="svg-icon svg-icon-2x text-white">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)"
                    fill="currentColor"></rect>
                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)"
                    fill="currentColor"></rect>
            </svg>
        </span>
    </div>
</div>
{{ form_start(form, {'attr': {'role':'form', 'class': 'form'}}) }}
<div class="modal-body content-doc">
    {{ include('_includes/ajax/response.html.twig') }}

    <ul class="nav nav-tabs nav-line-tabs nav-line-tabs-2x mb-5 fs-6">
        <li class="nav-item">
            <a class="nav-link active" data-bs-toggle="tab" href="#kt_tab_pane_4">Identification du locataire</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#kt_tab_pane_5">Autres informations</a>
        </li>

    </ul>

   

    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="kt_tab_pane_4" role="tabpanel">

            <div class="row g-5 g-xl-8">

                <div class="col-xl-4 col-md-4">

                    <!--begin::Tables Widget 3-->
                    <div class="card card-xl-stretch mb-xl-8" >
                        <!--begin::Header-->
                        <div class="card-header border-0 " style="border-bottom:1px solid white;background: #3a4049;min-height: 50px !important;">
                            <h3 class="card-title align-items-start flex-column text-white" >
                                <span class="card-label fw-bold fs-3 mb-1 text-white">

                                         Insérer le contrat scanné

                                </span>
                            </h3>

                        </div>
                        <!--end::Header-->

                        <!--begin::Body-->
                        <div class="card-body py-3 p-0">
                            <!--begin::Table container-->

                            <div class="row">

                                <div class="form-group col-md-12">
                                    <label class="sr-onl" for="userinput1">
                                      Insérer le contrat scanné
                                    </label>
                                    {{ form_widget(form.ScanContrat) }}
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <!--begin::Col-->
                <div class="col-xl-8 col-md-8" >

                    <!--begin::Tables Widget 3-->
                    <div class="card card-xl-stretch mb-xl-8" >
                        <!--begin::Header-->
                        <div class="card-header border-0" style="border-bottom:1px solid white;background: #3a4049;min-height: 50px !important;">
                            <h3 class="card-title align-items-start flex-column text-white">
                                <span class="card-label fw-bold fs-3 mb-1 text-white">

                                        Identification

                                </span>
                            </h3>

                        </div>
                        <!--end::Header-->

                        <!--begin::Body-->
                        <div class="card-body py-3 p-0">

                            <!--begin::Table container-->
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Choix locatatire
                                    </label>
                                    {{ form_widget(form.locataire) }}
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Choix appartement
                                    </label>
                                    {{ form_widget(form.appart) }}
                                </div>
                            </div>
                            <div class="row">

                                <div class="form-group col-md-12">
                                    <label class="sr-onl" for="userinput1">
                                        Nature
                                    </label>
                                    {{ form_widget(form.Nature) }}
                                </div>


                            </div>

                            <div class="row mb-4">
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Mois de caution
                                    </label>
                                    {{ form_widget(form.NbMoisCaution) }}
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Valeur
                                    </label>
                                    {{ form_widget(form.MntCaution,{attr:{'readonly':'readonly'}}) }}
                                </div>
                            </div>

                            <div class="row mb-4">
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Frais annexes
                                    </label>
                                    {{ form_widget(form.Fraisanex) }}
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Régime
                                    </label>
                                    {{ form_widget(form.Regime) }}
                                </div>
                            </div>
                                <div class="row mb-4">
                                    <div class="form-group col-md-6">
                                        <label class="sr-onl" for="userinput1">
                                            Date entrée
                                        </label>
                                        {{ form_widget(form.DateEntree) }}
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label class="sr-onl" for="userinput1">
                                            Date Proch. Versmt
                                        </label>
                                        {{ form_widget(form.DateProchVers) }}
                                    </div>
                                </div>
                        </div>

                        <!--begin::Col-->
                    </div>
                </div>



            </div>
        </div>
        <div class="tab-pane fade" id="kt_tab_pane_5" role="tabpanel">
            <div class="row g-5 g-xl-8">
                <h3 class="card-title align-items-start flex-column">
                    <span class="card-label fw-bold fs-3 mb-1">
                        <font style="vertical-align: inherit;">
                            <font style="vertical-align: inherit;">
                                
                                <div class="form-group col-md-12">
                                  
                                    {{ form_widget(form.StatutLoc) }}
                                   
                                
                                </div>
                            </font>
                        </font>
                    </span>
                </h3>

                <div class="col-xl-12 nouvelle">

                    <!--begin::Tables Widget 3-->
                    <div class="card card-xl-stretch mb-xl-8">
                        <!--begin::Header-->
                     {#    <div class="card-header border-0 pt-5">
                            <h3 class="card-title align-items-start flex-column">
                                <span class="card-label fw-bold fs-3 mb-1">
                                    <font style="vertical-align: inherit;">
                                         <font style="vertical-align: inherit;">Nouveau (elle)</font> 
                                    </font>
                                </span>
                            </h3>

                        </div> #}
                        <!--end::Header-->

                        <!--begin::Body-->
                        <div class="card-body py-3 p-0">
                            <!--begin::Table container-->
                            <div class="row">
                              
                                <div class="form-group col-md-4">
                                    <label class="sr-onl" for="userinput1">
                                        Mois avance
                                    </label>
                                    {{ form_widget(form.NbMoisAvance) }}
                                </div>
                                <div class="form-group col-md-4">
                                    <label class="sr-onl" for="userinput1">
                                    Montant avance
                                    </label>
                                    {{ form_widget(form.MntAvance,{attr:{'readonly':'readonly'}}) }}
                                </div>
                                <div class="form-group col-md-4">
                                    <label class="sr-onl" for="userinput1">
                                        Mnt loyer précédent
                                    </label>
                                    {{ form_widget(form.MntLoyerPrec) }}
                                </div>
                                <div class="form-group col-md-12">
                                    <label class="sr-onl" for="userinput1">
                                    Déjà loué un local ?
                                    </label>
                                  {{ form_widget(form.DejaLocataire) }}
                                </div>
                                
                               
                            </div>
                        </div>
                    </div>
                </div>
                <!--begin::Col-->
                <div class="col-xl-12 ancien">

                    <!--begin::Tables Widget 3-->
                    <div class="card card-xl-stretch mb-xl-8">
                        <!--begin::Header-->
                        {# <div class="card-header border-0 pt-5 texte-center">
                            <h3 class="card-title align-items-start  flex-column">
                                <span class="card-label text-justify fw-bold fs-3 mb-1">
                                    <font style="vertical-align: inherit;">
                                        <font style="vertical-align: inherit;">Ancien(ne)</font>
                                    </font>
                                </span>
                            </h3>

                        </div> #}
                        <!--end::Header-->

                        <!--begin::Body-->
                        <div class="card-body py-3">

                            <div class="row">
                            
                          
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Mnt Loyer initial
                                    </label>
                                    {{ form_widget(form.MntLoyerIni) }}
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Mnt loyer actuel
                                    </label>
                                    {{ form_widget(form.MntLoyerActu) }}
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Mnt arrières
                                    </label>
                                    {{ form_widget(form.MntArriere) }}
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="sr-onl" for="userinput1">
                                        Autres infos
                                    </label>
                                    {{ form_widget(form.AutreInfos) }}
                                </div>
                            
                            </div>
                        
                        </div>

                        <!--begin::Col-->
                    </div>
                </div>



            </div>
        </div>

    </div>
</div>
<div class="modal-footer">
    {# {{ include('_includes/ajax/loader.html.twig') }} #}
    <button type="button" class="btn btn-default btn-sm" data-bs-dismiss="modal">Annuler</button>
    <button type="submit" class="btn btn-main btn-ajax btn-sm"><span
            class="spinner-border d-none  spinner-ajax spinner-border-sm" role="status" aria-hidden="true"></span>
        Valider</button>
</div>
{{ form_end(form) }}
{% endblock %}

{% block java %}
<script>
    $(function () {
        init_select2('select');
         $('.nouvelle').hide()
        $('.ancien').hide()

    });
    $(function () {
        init_select2('select', null, '.content-doc');

        const $appart = $('#{{ form.appart.vars.id }}');
        const $nb = $('#{{ form.NbMoisCaution.vars.id }}');
        const $nb_avance = $('#{{ form.NbMoisAvance.vars.id }}');

        $nb_avance.on('input',function (){

         
            const $this = $(this);

            const appart_montant = $('.appart').find('option:selected').attr('data-value');


            if(appart_montant === undefined){
                alert('Veillez selectionner un appartement')
            }else{

                $('.input-mnt_avance').val($this.val() * parseInt(appart_montant))
            }

        })

        $nb.on('input',function (){
            const $this = $(this);
               
            const appart_montant = $('.appart').find('option:selected').attr('data-value');
            //alert(appart_montant)
            if(appart_montant === undefined){
                alert('Veillez selectionner un appartement')
            }else{

                $('.input-mnt_caution').val($this.val() * parseInt(appart_montant))
            }
            //$('.montant_caution').val(mois+' ' + annee);
           // alert()

        })

        $appart.on('change', function () {
            const $this = $(this);
            const appart_montant = $this.find('option:selected').attr('data-value');
            const resultat = $nb.val() * parseInt(appart_montant);

           
            if(isNaN(resultat) ){
              $('.input-mnt_caution').val(0)  
            }else{
                  $('.input-mnt_caution').val(resultat)
            }

            //const nb = $this.find('option:selected').attr('data-value');
            //$('.libelleCampagne').val(mois+' ' + annee);


        });
       
    });
        var checkBox0 = $('#contratloc_StatutLoc_0');
        var checkBox1 = $('#contratloc_StatutLoc_1');
        var nouvelle = $('.nouvelle');
        var ancien = $('.ancien');
        checkBox0.on('click',function () {
          nouvelle.show();
         ancien.hide();

        });
        checkBox1.on('click', function () {
                nouvelle.hide();
            ancien.show();
        });
       
          $('.no-auto').each(function () {
                const $this = $(this);
                const $id = $('#' + $this.attr('id'));
                init_date_picker($id, 'down', (start, e) => {
                    //$this.val(start.format('DD/MM/YYYY'));
                }, null, null, null);

                $id.on('apply.daterangepicker', function (ev, picker) {
                    $(this).val(picker.startDate.format('DD/MM/YYYY'));
                });
            });
       
     


    
   
</script>
{% endblock %}